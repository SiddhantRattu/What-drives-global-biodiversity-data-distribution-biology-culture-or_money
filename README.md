# Global Biodiversity Data Analysis

![Status](https://img.shields.io/badge/Status-Active-success)
![Language](https://img.shields.io/badge/Language-R-blue)
![Dependency Management](https://img.shields.io/badge/renv-Enabled-green)

Our understanding of global biodiversity distribution is shaped by our ability to observe, identify, and share species data. While access to biodiversity records (particularly through public repositories like GBIF) is greater than ever, the volume of data varies widely across countries. This disparity may partly reflect differences in taxonomic richness, but it is also influenced by each countryâ€™s cultural history, or its capacity to fund fieldwork, manage data, and support open access. Yet, the factors driving these differences remain understudied.

This repository contains a reproducible R pipeline designed to aggregate, clean, and analyze global datasets to investigate these drivers.

---

## ðŸ“‚ Project Structure

The project follows a strict directory structure to ensure reproducibility and separation of concerns.

```text
.
â”œâ”€â”€ scripts/                # Analysis pipeline and auxiliary tools
â”‚   â”œâ”€â”€ 00_setup_libraries.R
â”‚   â”œâ”€â”€ 01_data_cleaning.R
â”‚   â”œâ”€â”€ ... (numbered pipeline)
â”‚   â””â”€â”€ Final_output.R      # Data aggregation for final reporting
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                # Immutable source data (CSVs, Shapefiles)
â”‚   â””â”€â”€ processed/          # Cleaned intermediate datasets
â”œâ”€â”€ docs/                   # Data dictionaries and column definitions
â”œâ”€â”€ output/                 # Generated figures and tables
â”œâ”€â”€ renv/                   # Project library (dependency management)
â”œâ”€â”€ drafts/                 # Archived code and experiments
â””â”€â”€ README.md
```

---

## ðŸš€ Getting Started

This project uses [`renv`](https://rstudio.github.io/renv/) for dependency management to ensure a consistent environment.

1.  **Clone the repository.**
2.  **Restore the environment:**
    Open the project in R/RStudio and run:
    ```r
    renv::restore()
    ```
    This will install the exact package versions specified in `renv.lock`.

---

## ðŸ› ï¸ Data Pipeline & Workflows

The analysis is split into a **Core Pipeline** (sequential data processing) and **Specialized Modules** (specific analysis tasks).

### 1. Core Processing Pipeline
These scripts should be executed in numerical order to replicate the standard dataset cleaning process.

| Script | Description |
| :--- | :--- |
| **`00_setup_libraries.R`** | **Environment Setup.** Installs and loads required packages (`tidyverse`, `WDI`, `janitor`, `sf`, etc.). |
| **`01_data_cleaning.R`** | **Data Ingestion & harmonization.** Imports `biodiversity_dataset_master.csv`, standardizes country names (ISO3C), processes colonial history flags, and merges auxiliary variables. Output: `data/processed/biodiversity_clean_v1.csv`. |
| **`02_check_missing_data.R`** | **Quality Assurance.** Audits the cleaned dataset for missing values (NAs) and generates a log report in `docs/missing_values_log.txt`. |
| **`03_outlier_detection.R`** | **Statistical Validation.** Identifies multivariate outliers (e.g., Population vs. Area) using Z-score thresholds (>3 SD) and visualization. |
| **`04_exploratory_plots.R`** | **EDA.** Generates distribution plots (histograms) and summary statistics tables to characterize the dataset structure. |

### 2. Advanced Analysis & Data Fetching
These scripts operate independently or as extensions to the core pipeline.

| Script | Description |
| :--- | :--- |
| **`Final_output.R`** | **Data Aggregation.** The primary script for generating the final reporting dataset. It merges Forest cover, Biome counts, WDI research metrics, and GBIF records into a single, color-coded Excel workbook (`Final_Dataset_Complete.xlsx`). |
| **`variables_raw_data.R`** | **API Data Fetching.** Connects to external APIs (World Bank, GeoBoundaries) to download and update raw economic and climatic indicators. |
| **`GBIF_Record_Code.R`** | **GBIF Integration.** Queries the GBIF API to retrieve the total count of biodiversity records per country. |
| **`Calculate Diversity...`** | **Spatial Analysis.** Uses `sf` to calculate biome diversity counts and protected area coverage percentages based on shapefile intersections. |
| **`Geo-B-Countries.R`** | **Geospatial Metadata.** Retrieves standardized administrative boundary metadata from the GeoBoundaries API. |

---

## ðŸ’¾ Data Assets

### `data/raw/`
Contains the immutable source files. **Do not modify these files manually.**
*   `biodiversity_dataset_master.csv`: The primary dataset.
*   `COLDAT_colonies.csv`: Historical colonial data.
*   `variables_per_country_UPDATED.csv`: Economic and development indicators.

### `data/processed/`
Contains reproducible outputs generated by the scripts.
*   `biodiversity_clean_v1.csv`: The harmonized dataset ready for analysis.

---

## ðŸ“š Documentation

Detailed variable descriptions can be found in the `docs/` directory:
*   **`column_definitions.md`**: Detailed textual descriptions of all variables.
*   **`data_dictionary.csv`**: A machine-readable format of the variable definitions.

---

## ðŸ“¦ Environment

*   **R Version**: Specified in `renv.lock`.
*   **Key Libraries**: `tidyverse`, `sf`, `WDI`, `rgbif`, `janitor`, `ggplot2`.
